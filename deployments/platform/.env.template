# ==============================================================================
# Platform Environment Configuration
# ==============================================================================
# Copy this file to .env and customize values before starting the platform.
#   cp .env.template .env
#   ./scripts/generate-keys.sh   # appends SSL_PWD
#
# Products: PingAccess (9.0), PingAM (8.0.2), PingDirectory (11.0)
# Architecture: 3-container — PingDirectory is the unified LDAP backend.
# ==============================================================================

# --- Hostnames ---------------------------------------------------------------
# All services share a top-level domain. Add these to /etc/hosts:
#   127.0.0.1  platform.local pa.platform.local am.platform.local pd.platform.local
#
TOP_LEVEL_DOMAIN=platform.local
HOSTNAME_PA=pa.platform.local
HOSTNAME_AM=am.platform.local
HOSTNAME_PD=pd.platform.local

# --- PingAccess (reverse proxy) ----------------------------------------------
PA_ADMIN_PORT=9000
PA_ENGINE_PORT=3000

# --- PingAM (authentication server) -----------------------------------------
PINGAM_ADMIN_USER=amAdmin
PINGAM_ADMIN_PASSWORD=Password1
PINGAM_DEPLOYMENT_URI=am
PINGAM_BASE_URL=https://${HOSTNAME_AM}:8443/${PINGAM_DEPLOYMENT_URI}
PINGAM_SERVER_URL=https://${HOSTNAME_AM}:8443
AM_HTTP_PORT=8080
AM_HTTPS_PORT=8443
PINGAM_REALM=alpha
PINGAM_COOKIE=iPlanetDirectoryPro

# PingAM journeys (imported via scripts/import-journeys.sh)
PINGAM_JOURNEY=Login
PINGAM_WEBAUTHN_JOURNEY=WebAuthnLogin

# --- PingDirectory (unified LDAP backend) ------------------------------------
# Serves ALL PingAM stores: config, CTS, policy, AND user/identity store.
# Two PD tweaks applied via pd-post-setup.dsconfig:
#   1. single-structural-objectclass-behavior: accept
#   2. etag mirror virtual attribute (ds-entry-checksum → etag)
PD_ROOT_USER_DN=cn=administrator
PD_ROOT_USER_PWD=2FederateM0re
PD_BASE_DN=dc=example,dc=com
PD_LDAPS_PORT=1636
PD_HTTPS_PORT=1443
PD_MAKELDIF_USERS=10
PD_LICENSE_PATH=../../binaries/pingdirectory/license/PingDirectory-11.0.0.0-Development.lic

# PingAM → PingDirectory connection (both config and user stores)
USERSTORE_TYPE=LDAPv3ForOpenDS
USERSTORE_SSL=SSL
USERSTORE_HOST=${HOSTNAME_PD}
USERSTORE_PORT=${PD_LDAPS_PORT}
USERSTORE_SUFFIX=${PD_BASE_DN}
USERSTORE_MGRDN=${PD_ROOT_USER_DN}
USERSTORE_PASSWD=${PD_ROOT_USER_PWD}

# --- PingAM LDAP attributes to map to session properties ---------------------
PINGAM_LDAP_ATTRIBUTE=mail,cn

# --- TLS / SSL ---------------------------------------------------------------
# SSL_PWD is appended by scripts/generate-keys.sh — do not set manually.
# For enterprise deployments, override these paths:
CUSTOM_CA_CERT_PATH=
CUSTOM_KEYSTORE_PATH=
ADDITIONAL_TRUST_CERTS_DIR=

# --- Ping Identity DevOps credentials ----------------------------------------
# Required for pulling images from Docker Hub. Set via:
#   https://devops.pingidentity.com/how-to/devopsRegistration/
PING_IDENTITY_DEVOPS_USER=
PING_IDENTITY_DEVOPS_KEY=
